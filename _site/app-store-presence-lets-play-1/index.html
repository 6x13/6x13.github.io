<div class="highlighter-rouge"><pre class="highlight"><code>This is #1 of the how-to  series on custom store presence analysis and
plotting using Python, Jupyter and lots of sciency-graphy libraries.

- [x] [#1 - Let's Play: Scrape] [part-1]  
- [x] [#2 - Let's Play: Cleanup] [part-2]  
- [x] #3 - Let's Play: Optimize  
- [ ] #4 - Let's Play: Analyze  
- [ ] #5 - Let's Play: Visualize  
- [ ] #6 - &lt;strong&gt;...
</code></pre>
</div>

<p>![Preparing a business plan  requires systematic procrastination: Store
presence analytics!][jack]
[jack]: https://media.giphy.com/media/H0Yi2igIiIwy4/giphy.gif</p>

<blockquote>
  <p>All work and no play makes Jack a dull boy.</p>
</blockquote>

<p>Preparing  a business  plan requires  fourteen things:  a business,  a
dozen cups of coffee and systematic procrastination.</p>

<p>I am sure  you can handle the  coffee and the business. So  for now, I
will only try to help with the procrastination:</p>

<blockquote>
  <p>I need some insight into the  App Store presence of our latest game,
<a href="http://6x13.com/">Twiniwt</a>. I visit App Annie‚Äôs <em>Featured</em> page, as usual.</p>
</blockquote>

<p>If you  don‚Äôt know  about App  Annie, <a href="aa-info">this  is a  good review  of the
service</a>.</p>

<p>Analytics  you find  on such  dedicated services  are good  as general
performance metrics.  However, you  might want the  data to  support a
particular claim in  your business plan. The  freely available content
is hardly useful for that. The signal  to noise ratio makes it hard to
read. Besides, you can only filter the data.</p>

<p>We have to  do some ad-hoc data science and  visualization in order to
get better results. Now, what was <strong>data science</strong>, again?</p>

<div class="jekyll-twitter-plugin"><blockquote class="twitter-tweet"><p lang="en" dir="ltr">&quot;A data scientist is a statistician who lives in San Fransisco&quot; <a href="https://twitter.com/hashtag/monkigras?src=hash">#monkigras</a> <a href="http://t.co/HypLL3Cnye">pic.twitter.com/HypLL3Cnye</a></p>&mdash; Jeremy Jarvis (@jeremyjarvis) <a href="https://twitter.com/jeremyjarvis/status/428848527226437632">January 30, 2014</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div>

<p>I  live  in  Istanbul  and  I prefer  a  budget  GNU/Linux  laptop  at
work. Obviously, I  am no data scientist. Still,  some half-assed data
science is better than none.</p>

<h4 id="lets-play-store-presence-analytics">Let‚Äôs play: STORE PRESENCE ANALYTICS!</h4>

<p>This will require at least five steps:</p>

<dl>
  <dt>Scrape</dt>
  <dd>Gather the data and understand its current structure</dd>
  <dt>Cleanup</dt>
  <dd>Restructure and delete irrelevant fields of the data</dd>
  <dt>Optimize</dt>
  <dd>Optimize the restructured data to a format that is faster to batch
process</dd>
  <dt>Analyze</dt>
  <dd>Do filtering, mapping, grouping and analysis over data</dd>
  <dt>Visualize</dt>
  <dd>Plot and visualize the data frames</dd>
</dl>

<p>We will  dedicate a seperate  post to each  of those titles.  The data
analysis and visualization  steps can actually grow  to multiple posts
as we go.</p>

<p>We won‚Äôt delve into the  subject of <strong>integration</strong>, yet we will
rely on cross-platform, portable data formats. Besides, we will mainly
use Python, which is a very sound choice for integration.</p>

<p>We won‚Äôt be concerned about <strong>storage</strong> either, as the data will
already shrink significantly while we are optimizing for performance.</p>

<p>Before we begin, let‚Äôs look at some coffee beans and get hyped!</p>

<p><img class="size-full wp-image-149 aligncenter" src="http://blog.6x13.com/wp-content/uploads/2017/09/coffee_beans.png" alt="" width="310" height="175" srcset="http://blog.6x13.com/wp-content/uploads/2017/09/coffee_beans.png 310w, http://blog.6x13.com/wp-content/uploads/2017/09/coffee_beans-300x169.png 300w" sizes="(max-width: 310px) 100vw, 310px" /></p>

<h6 id="scrape">SCRAPE</h6>

<p>First things first. If I want to analyze store presence data, <strong>I need
the store presence data.</strong>  I need it in a way I can  process it. I am
already familiar with App Annie‚Äôs  daily feature tables. Here we
go:</p>

<p>Go to your app‚Äôs page.</p>

<p>Go to <strong>User Acquisition</strong>¬†¬ª <strong>Featured.</strong></p>

<p>This is good stuff, even though the data itself is not. üòí<figure id="attachment_117" style="width: 1083px" class="wp-caption alignnone"></figure></p>

<p><img class="wp-image-117 size-full" src="http://blog.6x13.com/wp-content/uploads/2017/09/featured-table.jpg" alt="App Store Presence Feature Table" width="1083" height="305" srcset="http://blog.6x13.com/wp-content/uploads/2017/09/featured-table.jpg 1083w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-table-300x84.jpg 300w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-table-768x216.jpg 768w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-table-1024x288.jpg 1024w" sizes="(max-width: 1083px) 100vw, 1083px" />&lt;figcaption class="wp-caption-text"&gt;WTF are those app positions! 1714? Seriously?&lt;/figcaption&gt;&lt;/figure&gt;</p>

<p>Anyway.</p>

<p>When   I   click   the   <strong>Export</strong>   button,   I   get   this.<figure id="attachment_243" style="width:     632px" class="wp-caption aligncenter"></figure></p>

<p><img class="size-full wp-image-243" src="http://blog.6x13.com/wp-content/uploads/2017/09/appannie-unlock.jpg" alt="connect" width="632" height="293" srcset="http://blog.6x13.com/wp-content/uploads/2017/09/appannie-unlock.jpg 632w, http://blog.6x13.com/wp-content/uploads/2017/09/appannie-unlock-300x139.jpg 300w" sizes="(max-width: 632px) 100vw, 632px" />&lt;figcaption class="wp-caption-text"&gt;Connect this app? Hmm, why not!&lt;/figcaption&gt;&lt;/figure&gt;</p>

<p>Now, I am sure App Annie‚Äôs <a href="https://www.appannie.com/en/tours/market-data-intelligence/">premium solution</a> provides various great viewpoints¬† and customizations to the data. However, being an indie studio and all, we cannot afford it.</p>

<p>Hey, there  is another way! I  can connect my  app. But what do  I see
when I click connect? It is  asking for my App Store developer account
password. <strong>I don‚Äôt  care what encryption they use,  there is no
way I am  filling those Connect forms asking for  my developer account
passwords.</strong></p>

<p>So, I guess I am on my own, but that is OK.</p>

<p><em>Be warned that I  do not know if App Annie  ever intended or actually
permitted the  use of data they  transfer to client computers  in such
way. So I will  not tell you what to do, I will  just describe how one
would access such freely available data in a structured data format.</em></p>

<p>Why not having a closer look at the transferred data in Firefox? Right
click anywhere in screen and click <strong>Inspect Element.</strong></p>

<p>Go to <strong>Network</strong> tab.</p>

<p><img class="alignnone wp-image-84 size-full" src="http://blog.6x13.com/wp-content/uploads/2017/09/featured-page.jpg" alt="App Annie Featured Page" width="826" height="495" srcset="http://blog.6x13.com/wp-content/uploads/2017/09/featured-page.jpg 826w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-page-300x180.jpg 300w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-page-768x460.jpg 768w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-page-825x495.jpg 825w" sizes="(max-width: 826px) 100vw, 826px" /></p>

<p>Now this is  where you can track requests and  responses. Whenever you
change the table options,  a new set of data will be  sent to you, the
client, in JSON format.</p>

<p>The entry that contains the data you asked for is something like this:</p>

<pre>/ajax/ios/app/your-app-name/daily-feature...</pre>

<p>That is the  app‚Äôs daily store presence  aggregated according to
your preferences.</p>

<h6 id="saving-your-data">Saving Your Data</h6>

<p>When you  need to  save a  piece of data  a web  server sent  you, you
simply right click the corresponding entry in <strong>Network</strong> tab, then do
<strong>Copy</strong>¬†¬ª <strong>Copy Response.</strong></p>

<p>Open your favourite text editor and  paste the clipboard to a new JSON
file.</p>

<p>If you want to quickly do that for multiple data sets, you can instead
<strong>Copy</strong>¬†¬ª <strong>Copy as cURL</strong>, and  modify the date etc. in copied curl
command.</p>

<p>_</p>

<h6 id="data-structure">DATA STRUCTURE</h6>

<p>Let‚Äôs check  out a sample store  presence in an App  Annie Daily
Featured response.</p>

<pre>[
  [
    {
      "image": "https://static-s.aa-cdn.net/img/ios/...",
      "type": "icon",
      "thumb": "https://static-s.aa-cdn.net/img/ios/..."
    }
  ],
  [
    "China",
    <strong>"CN"</strong>
  ],
  <strong>"iPhone"</strong>,
  <strong>"Board"</strong>,
  <strong>"Collection List"</strong>,
  "N/A",
  <strong>2</strong>,
  4,
  <strong>6</strong>,
  [
    {
      "existence": false,
      "detail": null,
      "label": <strong>"Featured Home"</strong>
    },
    {
      "existence": false,
      "detail": null,
      "label": <strong>"Board"</strong>
    },
    {
      "existence": true,
      "detail": {
        "position": [
          6
        ],
        "row": <strong>[
          4,
          4
        ]</strong>
      },
      "parent": <strong>"ÂÖçË¥π"</strong>,
      "label": "Twiniwt"
    }
  ],
  [
    "N/A",
    0,
    100,
    ""
  ]
]</pre>

<p>Now, compare it  to the table, not too carefully,  though. (I couldn‚Äôt
bother finding  the exact same  record.¬†üòé)<figure id="attachment_117" style="width: 1083px" class="wp-caption alignnone"></figure></p>

<p><img class="wp-image-117 size-full" src="http://blog.6x13.com/wp-content/uploads/2017/09/featured-table.jpg" alt="App Store Presence Feature Table" width="1083" height="305" srcset="http://blog.6x13.com/wp-content/uploads/2017/09/featured-table.jpg 1083w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-table-300x84.jpg 300w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-table-768x216.jpg 768w, http://blog.6x13.com/wp-content/uploads/2017/09/featured-table-1024x288.jpg 1024w" sizes="(max-width: 1083px) 100vw, 1083px" />&lt;figcaption class="wp-caption-text"&gt;1714? Why do you even put that into the table? That is just wasted network bandwidth.&lt;/figcaption&gt;&lt;/figure&gt;</p>

<p>Below is a breakdown of the row contents:</p>

<dl>
  <dt>Creative <code class="highlighter-rouge">[GARBAGE]</code></dt>
  <dd>URLs to store creative for the app.</dd>
  <dt>Country</dt>
  <dd>The App Store country name as well as the two-letter

    <p><a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1 alpha-2</a> code for it.</p>
  </dd>
  <dt>Device</dt>
  <dd>iPhone or iPad</dd>
  <dt>Category Page</dt>
  <dd>The featured category page where the placement is displayed.</dd>
  <dt>Type</dt>
  <dd>The feature  type of  the final  placement displayed  in the  app
    store.</dd>
  <dt>Subtitle <code class="highlighter-rouge">[GARBAGE]</code></dt>
  <dd>The text shown alongside feature banners and collection titles.</dd>
  <dt>Depth</dt>
  <dd>The number of steps necessary to see the final feature placement.</dd>
  <dt>Row <code class="highlighter-rouge">[DUPLICATE]</code></dt>
  <dd>The final  row  number  along the  path  leading  to the  feature
    placement.</dd>
  <dt>Position</dt>
  <dd>The  final position number along  the path leading to  the feature
placement.</dd>
  <dt>Feature Path <code class="highlighter-rouge">[DIRTY]</code></dt>
  <dd>A  detailed path of where  the feature placement was  shown in the
app store.</dd>
  <dt>Premium Content <code class="highlighter-rouge">[GARBAGE]</code></dt>
  <dd>Locked additional  content,  only activated  for premium  account
    queries.</dd>
</dl>

<p>Here is the  cleaned-up version of the store presence  data we want to
work with.</p>

<pre>[
  "CN",
  "iPhone",
  "Board",
  "Collection List",
  2,
  [
    4,
    4
  ],
  6,
  [
    "Home",
    "Board",
    "ÂÖçË¥π"
  ]
]</pre>

<p>Awesome, but enough with the data  scraping for today. I will show you
how to cleanup and restructure the JSON  data to fit our needs in next
part.</p>

<p>Check back for <a href="http://blog.6x13.com/app-store-presence-lets-play-2/">Part 2</a> of the series! If you have any questions or advice, please comment below. Thank you!</p>

<h6 id="related-links">Related Links</h6>

<p>Check  out the  following official  App Store  guide to  building your
store presence:</p>

<p><a href="https://developer.apple.com/app-store/planning/">Make the Most of the App¬†Store</a></p>
